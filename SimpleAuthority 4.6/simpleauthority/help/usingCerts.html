<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Mac OS X version 5.0.0">
  <link rel="stylesheet" type="text/css" href="style.css">
  <title>SimpleAuthority Help - Using Certificates</title>
</head>
<body>
  <div id="nav">
    <div id="nav_image">
      <a href="http://simpleauthority.com"><img src="images/SimpleAuthority.png" alt="logo"></a>
    </div>
    <div id="nav_heading">
      <h1>SimpleAuthority<br>
      Help&nbsp;Pages</h1>
    </div>
    <ul class="nav">
      <li class="navitem">
        <a href="gettingStarted.html">Getting&nbsp;Started</a>
      </li>
      <li class="navsubitem">
        <a href="gettingStarted.html#mainWindow">The&nbsp;main&nbsp;window</a>
      </li>
      <li class="navsubitem">
        <a href="gettingStarted.html#generatingCerts">Generating&nbsp;certificates</a>
      </li>
      <li class="navsubitem">
        <a href="gettingStarted.html#fileTypes">File&nbsp;types</a>
      </li>
      <li class="navsubitem">
        <a href="gettingStarted.html#usingCerts">Using&nbsp;certificates</a>
      </li>
      <li class="navitem">
        <a href="generatingCA.html">Generating&nbsp;a&nbsp;CA</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCA.html#newCa">How&nbsp;to&nbsp;generate&nbsp;a&nbsp;CA</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCA.html#hierarchy">CA&nbsp;hierarchies</a>
      </li>
      <li class="navitem">
        <a href="managingUsers.html">Managing&nbsp;Users</a>
      </li>
      <li class="navsubitem">
        <a href="managingUsers.html#addRemoveUser">Adding&nbsp;and&nbsp;removing</a>
      </li>
      <li class="navsubitem">
        <a href="managingUsers.html#importing">Importing&nbsp;details</a>
      </li>
      <li class="navsubitem">
        <a href="managingUsers.html#userNames">User&nbsp;names</a>
      </li>
      <li class="navsubitem">
        <a href="managingUsers.html#inactiveUsers">Inactive&nbsp;users</a>
      </li>
      <li class="navitem">
        <a href="generatingCerts.html">Generating&nbsp;Certificates</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCerts.html#expiringCerts">Certificate&nbsp;status</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCerts.html#newCerts">New&nbsp;certificates</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCerts.html#csr">Certificate&nbsp;signing&nbsp;requests</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCerts.html#certTypes">Certificate&nbsp;types</a>
      </li>
      <li class="navsubitem">
        <a href="generatingCerts.html#customCertTypes">Custom&nbsp;certificate&nbsp;types</a>
      </li>
      <li class="navitem">
        <a href="managingCerts.html">Managing&nbsp;Certificates</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#view">Viewing&nbsp;certificate&nbsp;details</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#export">Exporting&nbsp;certificates</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#directoryPublishing">Directory&nbsp;publishing</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#revocation">Revoking&nbsp;certificates</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#calendar">Expiry&nbsp;date&nbsp;calendar</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#managingCertificates">Managing&nbsp;records</a>
      </li>
      <li class="navsubitem">
        <a href="managingCerts.html#managingIdentities">Managing&nbsp;identities</a>
      </li>
      <li class="navitem">
        <a href="commandLine.html">Command&nbsp;Line&nbsp;Interface</a>
      </li>
      <li class="navsubitem">
        <a href="commandLine.html#cliUse">Using&nbsp;the&nbsp;command&nbsp;line</a>
      </li>
      <li class="navsubitem">
        <a href="commandLine.html#cliCommands">Command&nbsp;line&nbsp;interface</a>
      </li>
      <li class="navsubitem">
        <a href="commandLine.html#cliArguments">Command&nbsp;line&nbsp;arguments</a>
      </li>
      <li class="navsubitem">
        <a href="commandLine.html#cliSystemProperties">System&nbsp;properties</a>
      </li>
      <li class="navsubitem">
        <a href="commandLine.html#cliReturnCodes">Return&nbsp;codes</a>
      </li>
      <li class="navsubitem">
        <a href="commandLine.html#cliServlet">Web&nbsp;application&nbsp;interface</a>
      </li>
      <li class="navitem">
        <a href="usingCerts.html">Using&nbsp;Certificates</a>
      </li>
      <li class="navsubitem">
        <a href="usingCerts.html#email">Secure&nbsp;email</a>
      </li>
      <li class="navsubitem">
        <a href="usingCerts.html#documents">Document&nbsp;signing</a>
      </li>
      <li class="navsubitem">
        <a href="usingCerts.html#vpn">VPN&nbsp;access</a>
      </li>
      <li class="navsubitem">
        <a href="usingCerts.html#clientSSL">Client&nbsp;SSL&nbsp;authentication</a>
      </li>
      <li class="navsubitem">
        <a href="usingCerts.html#serverSSL">Server&nbsp;SSL&nbsp;authentication</a>
      </li>
      <li class="navsubitem">
        <a href="usingCerts.html#code">Code&nbsp;signing</a>
      </li>
    </ul>
  </div>
  <div id="mainbody">
    <h1>Using Certificates</h1>
    <p>This page is a "cheat sheet" for using keys and certificates in applications. Applications change, so please
    <a href="http://simpleauthority.com/contact.html">provide feedback</a> if you find any errors or would like to
    contribute information.</p>
    <h2 id="email">Secure email</h2>
    <p>Secure email provides options to sign and/or encrypt email. Email signatures allow the person that sent the
    message to be securely authenticated to the recipient (so the "from" address can be trusted), and prevents the
    message from being modified in transit without breaking the signature. Encrypting an email protects against
    eavesdropping, such as by an ISP or systems administrator.</p>
    <p>Secure email requires the email address in the certificate to match the email address for the mail account. If
    you have multiple email accounts, you need multiple certificates.</p>
    <p>Email encryption requires your mail client to have access to the email recipient's certificate. The easiest way
    to configure this is for the intended recipient to first send you a signed email. Most email clients will then
    automatically keep a copy of this certificate for future encryption use. Alternative approaches are to manually
    import all user certificates into the mail client key store, or to publish these certificates to an LDAP directory
    and configure the mail client to retrieve certificates from the directory. Outlook mail client
    supports LDAP directories for encryption certificates, Apple Mail does not.</p>
    <p>To configure an email client:</p>
    <ol>
      <li>Import the user identity file into the mail client key store. This requires entry of the identity file
      password.</li>
      <li>Import the CA certificate into the mail client trusted CA key store, so that certificates issued by this CA
      are trusted.</li>
      <li>(If necessary) Configure the mail client to select the key and certificate to use for signing and encryption.
      Note that the same certificate can be used for both signing and encryption.</li>
    </ol>
    <p>Apple Mail:</p>
    <ol>
      <li>Mail uses the macOS Keychain key store, which is managed using Keychain Access. Double click on an identity
      (<code>.p12</code>) file to begin the process of importing it into the Keychain.</li>
      <li>The CA certificate must also be imported into the Keychain. The certificate (<code>.cer</code>) file can be
      double clicked to import it and then the trust settings changed to <b>Always Trust</b>.</li>
      <li>Mail does not include any preferences for secure email. Signing and encryption buttons will magically appear
      in the email compose window when everything has been set up correctly.</li>
    </ol>
    <p>Microsoft Outlook:</p>
    <ol>
      <li>Outlook uses the Windows Microsoft Crypto API (CAPI) key store, which can be accessed via Internet Explorer
      <b>Options &gt; Content</b>. Double clicking on an identity file starts the process of importing it into
      CAPI.</li>
      <li>The CA certificate must be imported into the CAPI <b>Trusted Root Certification Authorities</b> store.</li>
      <li>Outlook includes options to specify which certificate to use for signing and encryption.</li>
    </ol>
    <h2 id="documents">Document signing</h2>
    <p>Document signing helps protect documents from unauthorised modification. Signing a document provides a way of
    verifying that a document has not been altered, for example after it has been released to a client. Document
    signing can also be used to authenticate the author of a document, or in the case of PDF smart forms the person
    that completed the PDF form.</p>
    <p>Microsoft Word:</p>
    <ul>
      <li>Word for Windows uses the Windows Microsoft Crypto API (CAPI) key store for keys and certificates. See
      Microsoft Outlook details above for more details.</li>
      <li>To apply a new digital signature, or to check the details of an existing signature, select <b>Options &gt;
      Security</b>.</li>
      <li>Word 2004 for Mac does not support document signing. Signed documents can be opened and edited fine (except
      that editing breaks the signature), but signatures cannot be applied and they cannot be verified.</li>
    </ul>
    <p>PDF files:</p>
    <ul>
      <li>PDF files use signatures differently from Word and OpenOffice files. Word and OpenOffice files have a
      signature that is separate to the document and applies to the whole document. PDF files include the signature
      field as part of the document itself, similar to a signature block on a paper document.</li>
      <li>PDF files must be created to include a Digital Signature field before they can be signed. This requires a
      copy of Adobe Acrobat Standard or Professional or equivalent.</li>
    </ul>
    <h2 id="vpn">VPN access</h2>
    <p>Certificates can be used in place of username and password authentication for VPN access. This provides a much
    higher level of security than password-based access.</p>
    <p>Note that secure shell (ssh) does not use X.509 keys and certificates, therefore certificates generated using
    SimpleAuthority cannot (easily) be used for ssh access.</p>
    <h2 id="clientSSL">Client SSL authentication</h2>
    <p>SSL (or TLS) is normally used with a key and certificate on the server to authenticate the server to a client,
    however the server can also be configured to require the client to authenticate using a certificate. This is a
    secure way of providing services to specific clients over the Internet. It is especially useful for controlling
    access to Web services such as a company document repository (e.g. using subversion) or a wiki.</p>
    <p>To configure a client's browser:</p>
    <ol>
      <li>Import the user identity file into the browser key store. This is the Windows CAPI key store for Internet
      Explorer, the Keychain for Safari, or Firefox's own key store.</li>
      <li>Import the CA certificate into the trusted CA key store, so that the user identity is trusted by the
      browser.</li>
    </ol>
    <p>To configure a Web server:</p>
    <ol>
      <li>Configure the server to require client SSL authentication.</li>
      <li>Configure the server to trust the CA that was used to issue client certificates.</li>
      <li>(Optional) Configure the server to also restrict clients based on an access control list, so that individual
      clients may be disabled from access.</li>
    </ol>
    <p>Apache:</p>
    <ol>
      <li>Require client SSL authentication using the <code>SSLVerifyClient</code> directive of the
      <code>mod_ssl</code> module.</li>
      <li>Export the CA certificate in PEM format from SimpleAuthority and configure Apache using the
      <code>SSLCACertificateFile</code> directive.</li>
      <li>(Optional) Implement an access control list for clients using <code>AuthType</code> and associated
      directives, where the <code>AuthUserFile</code> file includes a list of trusted certificates, one per line, like
      this:<br>
      <code>/C=AU/O=Simple Authority/CN=Paul Cuthbert:xxj31ZMTZzkVA</code></li>
      <li>(Optional) Use a certificate revocation list to manage untrusted client certificates, by generating the CRL
      using PEM format and including the Next Update field, and using the <code>SSLCARevocationFile</code> directive in
      Apache to reference the CRL file.</li>
    </ol>
    <h2 id="serverSSL">Server SSL authentication</h2>
    <p>Server SSL (or TLS) authentication involves using certificates to authenticate a server to a client but not vice
    versa. This is the most common way of authenticating a Web service to a browser.</p>
    <p>Server SSL authentication requires the server certificate name to match the server domain name or IP address.
    The certificate type must also be set to <b>SSL Server</b> in SimpleAuthority.</p>
    <p>The main problem with using your own CA such as SimpleAuthority for server SSL authentication is that the CA
    certificate will not be trusted by default by most browsers. This will cause a security warning to be displayed to
    the user. Aside from buying a commercial SSL certificate, the only solution is to import the CA certificate into
    the browser trusted CA key store.</p>
    <p>Apache:</p>
    <ol>
      <li>Generate the server SSL identity using SimpleAuthority with the PEM (no password) identity file format.</li>
      <li>Use the <code>SSLCertificateFile</code> and <code>SSLCertificateKeyFile</code> directives of the
      <code>mod_ssl</code> module to specify the SSL key and certificate files to use for server authentication.</li>
      <li>Use the <code>SSLRequireSSL</code> directive to turn SSL use on.</li>
    </ol>
    <h2 id="code">Code signing</h2>
    <p>Code signing allows users of your software to verify that the code comes from a trusted source and that it has
    not been maliciously altered or accidentally corrupted.</p>
    <p>Code signing can also be used to provide software with elevated privileges. For example,</p>
    <ul>
      <li>signed Java applets are allowed unlimited access to the local computer</li>
      <li>signed Windows executables can be downloaded from the Internet and run without displaying a security
      warning.</li>
    </ul>
    <p>The CA certificate must be imported into the operating system trusted key store before signed software is
    trusted.</p>
    <p>Different software tools are used to sign code depending on the development technology. Java JAR files are
    typically signed using the <code>jarsigner</code> tool. Windows executables can be signed using
    <code>signtool.exe</code>, which is distributed as part of the Windows Platform SDK.</p>
  </div>
</body>
</html>
